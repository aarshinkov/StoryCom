<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{templates/contentTemplate}">
  <head>
    <title th:text="#{title.signup} + ' | ' + #{app.title}"></title>
  </head>
  <body>
    <div layout:fragment="contentDiv">
      <div class="row justify-content-center">
        <div class="col-12 col-sm-10 col-lg-4">
          <div class="module">
            <!-- For testing purposes - enable it when you have TEST/PROD environments -->
            <!--<div class="alert alert-success" role="alert" th:if="${@configBean.getEnv()} eq 'TEST'">-->
            <!--<strong th:text="${@configBean.getEnvStyled()}">Test</strong> <span>environment!</span>-->
            <!--</div>-->

            <!--<h4>Sign up for <span th:text="#{app.title}"></span></h4>-->

            <form class="form-login form-wrapper form-medium" role="form" id="signupForm" action="#"
                  th:action="@{/signup}" th:object="${regUser}" method="POST">
              <h3 class="title-divider" th:text="#{signup.form.title}">Sign Up</h3>

              <h5 th:text="#{signup.form.account}">
                Account Information
              </h5>

              <div class="form-group">
                <label class="sr-only" for="firstNameInput" th:text="#{signup.form.firstname}">First name</label>
                <input type="text" class="form-control form-control-rounded" id="firstNameInput"
                       th:field="*{firstName}" th:classappend="${#fields.hasErrors('firstName')} ? 'is-invalid'"
                       th:placeholder="#{signup.form.firstname}"
                       oninput="validateFirstName()"/>
                <div class="invalid-feedback" th:errors="*{firstName}">Error</div>
              </div>

              <div class="form-group">
                <label class="sr-only" for="lastNameInput" th:text="#{signup.form.lastname}">Last name</label>
                <input type="text" class="form-control form-control-rounded" id="lastNameInput"
                       th:field="*{lastName}" th:classappend="${#fields.hasErrors('lastName')} ? 'is-invalid'"
                       th:placeholder="#{signup.form.lastname}"/>
                <div class="invalid-feedback" th:errors="*{lastName}">Error</div>
              </div>

              <div class="form-group">
                <label class="sr-only" for="usernameInput" th:text="#{signup.form.username}">Username</label>
                <input type="text" class="form-control form-control-rounded" id="usernameInput"
                       th:field="*{username}" th:classappend="${#fields.hasErrors('username')} ? 'is-invalid'"
                       th:placeholder="#{signup.form.username}"/>
                <div class="invalid-feedback" th:errors="*{username}">Error</div>
              </div>

              <div class="form-group">
                <label class="sr-only" for="emailInput" th:text="#{signup.form.email}">Email address</label>
                <input type="email" class="form-control form-control-rounded" id="emailInput" th:field="*{email}"
                       th:classappend="${#fields.hasErrors('email')} ? 'is-invalid'"
                       th:placeholder="#{signup.form.email}"/>
                <div class="invalid-feedback" th:errors="*{email}">Error</div>
              </div>

              <div class="form-group">
                <label class="sr-only" for="passwordInput" th:text="#{signup.form.password}">Password</label>
                <input type="password" class="form-control form-control-rounded" id="passwordInput"
                       th:field="*{password}" th:classappend="${#fields.hasErrors('password')} ? 'is-invalid'"
                       th:placeholder="#{signup.form.password}"/>
                <div class="invalid-feedback" th:errors="*{password}">Error</div>
              </div>

              <div class="form-group">
                <label class="sr-only" for="confirmPasswordInput" th:text="#{signup.form.confirmpass}">Confirm
                  password</label>
                <input type="password" class="form-control form-control-rounded" id="confirmPasswordInput"
                       th:field="*{confirmPassword}"
                       th:classappend="${#fields.hasErrors('confirmPassword')} ? 'is-invalid'"
                       th:placeholder="#{signup.form.confirmpass}"/>
                <div class="invalid-feedback" th:errors="*{confirmPassword}">Error</div>
              </div>
              <!--<div class="form-check">-->
              <!--<label class="form-check-label">-->
              <!--<input type="checkbox" value="term" class="form-check-input">-->
              <!--I agree with the Terms and Conditions.-->
              <!--</label>-->
              <!--</div>-->
              <hr/>

              <div style="margin-bottom: 1em;">
                <span th:text="#{signup.form.already}">Already signed up?</span>
                <a th:href="@{/login}" href="#" th:text="#{signup.form.loginhere}">Login here</a>
                <span>.</span>
              </div>

              <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
              <button type="submit" class="btn btn-success btn-md d-none d-lg-block">
                <!--                    <i class="fas fa-user"></i>-->
                <i class="fas fa-file-signature"></i>
                <span th:text="#{signup.form.button}">Sign up</span>
              </button>

              <button type="submit" class="mb-1 btn btn-block btn-success btn-rounded btn-lg d-block d-lg-none">
                <i class="fas fa-user"></i>
                <span th:text="#{signup.form.button}">Sign up</span>
              </button>
            </form>
          </div>
        </div>
      </div>
      <script>
        function validateFirstName() {
          var inputLength = $('#firstNameInput').val().length;

          if (inputLength > 0 && inputLength <= 100) {
            $('#firstNameInput').removeClass("is-invalid").addClass("is-valid");
          } else {
            $('#firstNameInput').removeClass("is-valid").addClass("is-invalid");
          }
        }
      </script>
    </div>
  </body>
</html>